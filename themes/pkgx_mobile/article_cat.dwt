<!DOCTYPE html>
<html lang="vi">
<head>
    <meta property="og:url" content="{$base_path}/{$cat_url}">
    <meta property="og:image" content="{$cdn_path}/data/images/phukiengiaxuong.jpg">
    <meta property="og:image:secure_url" content="{$cdn_path}/data/images/phukiengiaxuong.jpg">
    <meta name="twitter:image" content="{$cdn_path}/data/images/phukiengiaxuong.jpg">
    {if $keywords}<meta name="keywords" content="{$keywords}">{/if}
    <meta name="robots" content="{$meta_robots}">
    <title>{$page_title}</title>
    <link rel="canonical" href="{$base_path}/{$cat_url}">
    <link rel="alternate" href="{$base_path}/{$cat_url}" hreflang="vi-vn" />
    {include file='library/html_header.lbi'}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "CollectionPage",
      "name": "{$page_title}",
      "url": "{$base_path}/{$cat_url}",
      "description": "{$description}",
      "inLanguage": "vi-VN",
      "datePublished": "2020-11-17T09:42:03+07:00",
      "dateModified": "2025-08-27T16:09:45+07:00",
      "publisher": {
        "@type": "Organization",
        "name": "Phụ Kiện Giá Xưởng",
        "url": "https://phukiengiaxuong.com.vn/",
        "logo": {
          "@type": "ImageObject",
          "url": "https://phukiengiaxuong.com.vn/cdn/upload/files/profile/logo.webp"
        }
      },
      "mainEntity": {
        "@type": "ItemList",
        "itemListElement": [
          {foreach from=$artciles_list item=article name=artciles_list}
          {
            "@type": "ListItem",
            "position": {$smarty.foreach.artciles_list.iteration},
            "item": {
              "@type": "BlogPosting",
              "headline": "{$article.title|escape:'json'}",
              "url": "https://phukiengiaxuong.com.vn/{$article.url|escape:'html'}"
            }
          }{if !$smarty.foreach.artciles_list.last},{/if}
          {/foreach}
        ]
      }
    }
    </script>



<!--#endregion-->
    {insert_css files="css/global.css,css/article_cat.css"}
</head>
<body id="page_{$pname}">
{include file='library/page_header_article.lbi'}
<section>
{include file='library/ur_here.lbi'}
{include file='library/article_category_tree.lbi'}
    <!-- TemplateBeginEditable name="Top" -->


    {if $artciles_list}
    <h1 class="titlehome">{$cat_name}</h1>
    <ul class="newslist" id="article-container">
        {* Tải danh sách bài viết ban đầu từ file lbi giống như trang brand *}
        {include file='library/article_list_item.lbi'}
    </ul>

    {* Phân trang bị ẩn đi để JavaScript sử dụng *}
    <div id="hidden_pager" style="display: none;">
        {include file='library/pages.lbi'}
    </div>

    {* Container cho nút "Xem thêm" *}
    <div id="load_more_container">
        {* Sử dụng file pages_ajax.lbi giống hệt trang brand *}
        {include file='library/pages_ajax.lbi'}
    </div>

{else}
    <p class="empty">Không tìm thấy dữ liệu cho danh mục {$cat_name}</p>
{/if}
    <!-- TemplateBeginEditable name="Bottom" -->
<!-- TemplateEndEditable -->
<!-- TemplateEndEditable -->
{if $search_value ne ''}
<p style="margin: 10px">Có <strong>{$total_search}</strong> kết quả khớp với từ khóa <strong>"{$search_value}"</strong>: </p>
{else}
         <!-- TemplateBeginEditable name="Right" -->
        <!-- #BeginLibraryItem "/library/topview_article.lbi" -->
        <div class="clr"></div>
        <div class="titlehome">Bạn đọc xem nhiều</div>
        <div class="summarycomment">
            {foreach from=siy_topview_article($cat_id) item=article name=view_list}
            <a href="{$article.url|escape:html}">
                <div>{$smarty.foreach.view_list.iteration}</div>
                <h3>{$article.title}<span class="morecom">• {$article.viewed} lượt xem</span></h3>
            </a>
          {/foreach}
        </div>
         <!-- #EndLibraryItem -->
        <!-- TemplateEndEditable -->
{/if}<!-- End searh -->
</section>
{include file='library/page_footer.lbi'}
{insert_js name='article.Mobile.min.js' no_minify='js/jquery.min.1.8.3.js,js/plugins.js,js/lang.vi_vn.js' minify='js/global.js,js/init.js'}
{include file='library/html_footer_menu.lbi'}

{include file='library/html_footer.lbi'}
<script type="text/javascript">
    $(document).ready(function() {
        callmenu('._cat_article','.article_categories',2,50);
         var nav = $('ul.navhome');
        var item_nav = nav.find('li');
        var item_w = item_nav.length*(item_nav.width()+15);
        nav.css('width', item_w);

        $(".mnav li.current").length > 0 && $("._cat_article").scrollLeft($("._cat_article .current").offset().left)
    });
</script>
<script type="text/javascript">
$(document).ready(function() {
    // Bắt sự kiện click trên container chứa nút "Xem thêm"
    $(document).on('click', '#load_more_container a', function(e) {
        e.preventDefault();

        var container = $('#load_more_container');
        
        // Tìm link của trang tiếp theo từ khu vực phân trang BỊ ẨN
        var nextPageLink = $('#hidden_pager').find('a.next, a:contains("Tiếp theo"), a:contains("Trang tiếp")');

        if (nextPageLink.length === 0) {
            container.hide();
            return;
        }

        var url = nextPageLink.attr('href');
        
        container.html('<p style="padding:10px;">Đang tải...</p>');

        // Thêm tham số is_ajax=1 vào URL
        var ajaxUrl = url + (url.indexOf('?') > -1 ? '&' : '?') + 'is_ajax=1';

        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: 'json',
            success: function(response) {
                // Đổi 'goods_list' thành 'article_list' và '#brand_goods_list' thành '#article-container'
                if (response && response.article_list) {
                    $('#article-container').append(response.article_list);
                }
                
                if (response && response.hidden_pager) {
                    $('#hidden_pager').html(response.hidden_pager);
                }
                
                if (response && response.load_more_button && response.load_more_button.trim().length > 0) {
                    container.html(response.load_more_button);
                } else {
                    container.hide();
                }
            },
            error: function() {
                alert("Đã có lỗi xảy ra, vui lòng thử lại.");
                container.html('<a href="' + url + '">Thử lại</a>');
            }
        });
    });
});
</script>
</body>
</html>
